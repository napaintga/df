<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress Peripheral Driver Library (PDL): System Clock (SysClk)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress Peripheral Driver Library (PDL)
   &#160;<span id="projectnumber">Version 3.0.4.57</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__sysclk.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">System Clock (SysClk)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>The System Clock (SysClk) driver contains the API for configuring system and peripheral clocks. </p>
<p>Firmware uses the API to configure , enable, or disable a clock.</p>
<p>The clock system includes a variety of resources that can vary per device, including:</p><ul>
<li>Internal clock sources such as internal oscillators</li>
<li>External clock sources such as crystal oscillators or a signal on an I/O pin</li>
<li>Generated clocks such as an FLL, a PLL, and peripheral clocks</li>
</ul>
<p>Consult the Technical Reference Manual for your device for details of the clock system.</p>
<p>The PDL defines clock system capabilities in:<br />
devices&lt;family&gt;/&lt;series&gt;/include&lt;series&gt;_config.h. (E.g. devices/psoc6/psoc63/include/psoc63_config.h). User-configurable clock speeds are defined in the file system_&lt;series&gt;.h.</p>
<p>As an illustration of the clocking system, the following diagram shows the PSoC 63 series clock tree. The actual tree may vary depending on the device series. </p><div class="image">
<img src="sysclk_tree.png" alt="sysclk_tree.png"/>
</div>
<p>The sysclk driver supports multiple peripheral clocks, as well as the fast clock, slow clock, backup domain clock, timer clock, and pump clock. The API for any given clock contains the functions to manage that clock. Functions for clock measurement and trimming are also provided.</p>
<h1><a class="anchor" id="group_sysclk_configuration"></a>
Configuration Considerations</h1>
<p>The availability of clock functions depend on the availability of the chip resources that support those functions. Consult the device TRM before attempting to use these functions.</p>
<p>LPActive and LPSleep power modes limit the maximum clock frequency allowed on the device. Refer to the SysPm driver and the TRM for details.</p>
<h1><a class="anchor" id="group_sysclk_more_information"></a>
More Information</h1>
<p>Refer to the technical reference manual (TRM) and the device datasheet.</p>
<h1><a class="anchor" id="group_sysclk_MISRA"></a>
MISRA-C Compliance</h1>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>1.2 </td><td>R </td><td>No reliance on undefined behavior. </td><td>Calculation of an absolute value in the FLL and PLL configuration.  </td></tr>
<tr>
<td>5.6 </td><td>R </td><td>No identifier in one name space should have the same spelling as an identifier in another name space, with the exception of structure member and union member names. </td><td>The "mode" and "retval" are used as a structure/union member they are a label, tag or ordinary identifier.  </td></tr>
<tr>
<td>10.1 </td><td>R </td><td>The value of an expression of integer type shall not be implicitly converted to a different, underlying type if the expression is complex. </td><td>Use of a Cypress defined macro to access memory mapped objects. Use of a Cypress defined macro to divide with rounding.  </td></tr>
<tr>
<td>10.2 </td><td>R </td><td>The value of an expression of floating type shall not be implicitly converted to a different type if: a) it is not a conversion to a wider floating type, or b) the expression is complex, or c) the expression is a function argument, or d) the expression is a return expression. </td><td>The operands of this relational operator are expressions of different "essential type" categories (enum and unsigned).  </td></tr>
<tr>
<td>10.3 </td><td>R </td><td>A composite integer expression is being cast to a wider type. </td><td>Use of a Cypress defined macro to access memory-mapped objects. Calculating the clock parameters.  </td></tr>
<tr>
<td>10.4 </td><td>R </td><td>A composite floating point expression is being cast to double, or unsigned. </td><td>Use of the C library sqrt() function. Casting a floating-point calculation result to an integer.  </td></tr>
<tr>
<td>10.5 </td><td>R </td><td>The value of an expression of integer type shall not be implicitly converted to a different, underlying type if the expression is complex. </td><td>Use of a Cypress defined macro to access memory-mapped objects.  </td></tr>
<tr>
<td>12.1 </td><td>A </td><td>Extra parentheses recommended. </td><td>Ternary operator uses constants; extra parentheses not needed.  </td></tr>
<tr>
<td>12.2 </td><td>A </td><td>The value of an expression must be the same under any order of evaluation that the standard permits. </td><td>The "rtnval" is modified more than once between the sequence points - the evaluation order is not specified.  </td></tr>
<tr>
<td>12.4 </td><td>A </td><td>The right hand operand of a logical &amp;&amp; or || operator shall not contain side effects. </td><td>No side effect in this case.  </td></tr>
<tr>
<td>13.4 </td><td>R </td><td>The controlling expression of a for statement shall not contain any objects of floating type. </td><td>Scanning through a list of floating point values.  </td></tr>
<tr>
<td>16.7 </td><td>R </td><td>The object addressed by the pointer parameter is not modified and so the pointer could be of type 'pointer to const'. </td><td>The callback function for system power management (SysPm) must be of generic callback type that contains non-const pointer parameter.  </td></tr>
<tr>
<td>18.4 </td><td>R </td><td>Unions shall not be used. </td><td>The clock path in <a class="el" href="group__group__sysclk__clk__peripheral__funcs.html#ga366428a7c17da00f7a7ae025aeda2e23">Cy_SysClk_PeriphGetFrequency()</a> uses either FLL or PLL.  </td></tr>
<tr>
<td>19.4 </td><td>R </td><td>Macros shall only expand to a limited set of constructs. </td><td>The macro CY_SYSCLK_CLR_SET uses a concatenate operation, so one of the macro parameters cannot be enclosed in parentheses.  </td></tr>
</table>
<h1><a class="anchor" id="group_sysclk_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.11 </td><td><p class="starttd">Updated the following functions. Now they use a semaphore when try to read the status or configure the SysClk measurement counters:</p><ul>
<li><a class="el" href="group__group__sysclk__calclk__funcs.html#ga0a87e123411d5711344780ddfa492f37" title="Assigns clocks to the clock measurement counters, and starts counting. ">Cy_SysClk_StartClkMeasurementCounters()</a></li>
<li><a class="el" href="group__group__sysclk__calclk__funcs.html#ga979f2ef437908618291bf3a935488412" title="Calculates the frequency of the indicated measured clock (clock1 or clock2). ">Cy_SysClk_ClkMeasurementCountersGetFreq()</a></li>
</ul>
<p class="endtd">Now <a class="el" href="group__group__sysclk__calclk__funcs.html#ga979f2ef437908618291bf3a935488412" title="Calculates the frequency of the indicated measured clock (clock1 or clock2). ">Cy_SysClk_ClkMeasurementCountersGetFreq()</a> returns zero value, if during measurement device was in the Deep Sleep or partially blocking flash operation occurred  </p>
</td><td>Added arbiter mechanism for correct usage of the SysClk measurement counters  </td></tr>
<tr>
<td>1.10.1 </td><td>Renamed Power Management section to Low Power Callback section </td><td>Documentation update and clarification  </td></tr>
<tr>
<td rowspan="5">1.10 </td><td>Updated FLL parameter calculation </td><td>Support low frequency sources  </td></tr>
<tr>
<td>Added <a class="el" href="group__group__sysclk__pilo__funcs.html#ga3ad33424ef17a1ee78ce67e12273d763" title="Sets the PILO trim bits, which adjusts the PILO frequency. ">Cy_SysClk_PiloSetTrim()</a> and Cy_SysclkPiloGetTrim() functions </td><td>Support PILO manual trims  </td></tr>
<tr>
<td>Made <a class="el" href="group__group__sysclk__fll__funcs.html#ga3f87b4c1a742406ff1e73d3cd427ade9" title="Reports whether or not the FLL lost its lock since the last time this function was called...">Cy_SysClk_FllLostLock()</a> function dependent on SRSS v1 </td><td>Feature is not supported in SRSS v1  </td></tr>
<tr>
<td>Updated <a class="el" href="group__group__sysclk__pm__funcs.html#gacc3af2a1519b109e39ebe1aa8df58860" title="Callback function to be used when entering chip deep-sleep mode. ">Cy_SysClk_DeepSleepCallback()</a> to save/restore both FLL and PLL settings </td><td>The function should return when the lock is established or a timeout has occurred  </td></tr>
<tr>
<td>General documentation updates </td><td></td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__sysclk__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__enums.html">General Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__eco"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__eco.html">External Crystal Oscillator (ECO)</a></td></tr>
<tr class="memdesc:group__group__sysclk__eco"><td class="mdescLeft">&#160;</td><td class="mdescRight">The External Crystal Oscillator (ECO) is a clock source that consists of an oscillator circuit that drives an external crystal through its dedicated ECO pins. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__path__src"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__path__src.html">Clock Path Source</a></td></tr>
<tr class="memdesc:group__group__sysclk__path__src"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clock paths are a series of multiplexers that allow a source clock to drive multiple clocking resources down the chain. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__fll"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__fll.html">Frequency Locked Loop (FLL)</a></td></tr>
<tr class="memdesc:group__group__sysclk__fll"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FLL is a clock generation circuit that can be used to produce a higher frequency clock from a reference clock. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__pll"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__pll.html">Phase Locked Loop (PLL)</a></td></tr>
<tr class="memdesc:group__group__sysclk__pll"><td class="mdescLeft">&#160;</td><td class="mdescRight">The PLL is a clock generation circuit that can be used to produce a higher frequency clock from a reference clock. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__ilo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__ilo.html">Internal Low-Speed Oscillator (ILO)</a></td></tr>
<tr class="memdesc:group__group__sysclk__ilo"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ILO operates with no external components and outputs a stable clock at 32.768 kHz nominal. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__pilo"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__pilo.html">Precision Internal Low-Speed Oscillator (PILO)</a></td></tr>
<tr class="memdesc:group__group__sysclk__pilo"><td class="mdescLeft">&#160;</td><td class="mdescRight">PILO provides a higher accuracy 32.768 kHz clock than the <a class="el" href="group__group__sysclk__ilo.html">ILO</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__calclk"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__calclk.html">Clock Measurement</a></td></tr>
<tr class="memdesc:group__group__sysclk__calclk"><td class="mdescLeft">&#160;</td><td class="mdescRight">These functions measure the frequency of a specified clock relative to a reference clock. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__trim"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__trim.html">Clock Trim (ILO, PILO)</a></td></tr>
<tr class="memdesc:group__group__sysclk__trim"><td class="mdescLeft">&#160;</td><td class="mdescRight">These functions perform a single trim operation on the ILO or PILO. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__pm"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__pm.html">Low Power Callback</a></td></tr>
<tr class="memdesc:group__group__sysclk__pm"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entering and exiting low power modes require compatible clock configurations to be set before entering low power and restored upon wake-up and exit. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__wco"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__wco.html">Watch Crystal Oscillator (WCO)</a></td></tr>
<tr class="memdesc:group__group__sysclk__wco"><td class="mdescLeft">&#160;</td><td class="mdescRight">The WCO is a highly accurate 32.768 kHz clock source capable of operating in all power modes (excluding the Off mode). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__hf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__hf.html">High-Frequency Clocks</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__hf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Multiple high frequency clocks (CLK_HF) are available in the device. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__fast"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__fast.html">Fast Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__fast"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fast clock drives the "fast" processor (e.g. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__peri"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__peri.html">Peripheral Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__peri"><td class="mdescLeft">&#160;</td><td class="mdescRight">The peripheral clock is a divided clock of CLK_HF0 (<a class="el" href="group__group__sysclk__clk__hf.html">HF Clocks</a>). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__peripheral"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__peripheral.html">Peripherals Clock Dividers</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__peripheral"><td class="mdescLeft">&#160;</td><td class="mdescRight">There are multiple peripheral clock dividers that, in effect, create multiple separate peripheral clocks. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__slow"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__slow.html">Slow Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__slow"><td class="mdescLeft">&#160;</td><td class="mdescRight">The slow clock is the source clock for the "slow" processor (e.g. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__lf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__lf.html">Low-Frequency Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__lf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The low-frequency clock is the source clock for the <a class="el" href="group__group__mcwdt.html">Multi-Counter Watchdog (MCWDT)</a> and can be the source clock for <a class="el" href="group__group__sysclk__clk__bak.html">Backup Domain Clock</a>, which drives the <a class="el" href="group__group__rtc.html">Real-Time Clock (RTC)</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__timer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__timer.html">Timer Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__timer"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timer clock can be a source for the alternative clock driving the <a class="el" href="group__group__arm__system__timer.html">ARM System Timer (SysTick)</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__pump"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__pump.html">Pump Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__pump"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pump clock is a clock source used to provide analog precision in low voltage applications. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__clk__bak"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__clk__bak.html">Backup Domain Clock</a></td></tr>
<tr class="memdesc:group__group__sysclk__clk__bak"><td class="mdescLeft">&#160;</td><td class="mdescRight">The backup domain clock drives the <a class="el" href="group__group__rtc.html">Real-Time Clock (RTC)</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress Peripheral Driver Library (PDL)</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
