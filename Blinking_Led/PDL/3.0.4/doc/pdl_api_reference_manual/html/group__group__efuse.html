<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress Peripheral Driver Library (PDL): Electronic Fuses (eFuse)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress Peripheral Driver Library (PDL)
   &#160;<span id="projectnumber">Version 3.0.4.57</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__efuse.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">Electronic Fuses (eFuse)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>Electronic Fuses (eFuses) - non-volatile memory whose each bit is one-time programmable (OTP). </p>
<p>One eFuse macro consists of 256 bits (32 * 8). The PSoC devices have up to 16 eFuse macros; consult the device-specific datasheet to determine how many macros for a particular device. These are implemented as a regular Advanced High-performance Bus (AHB) peripheral with the following characteristics:</p><ul>
<li>eFuses are used to control the device life-cycle stage (NORMAL, SECURE, and SECURE_WITH_DEBUG) and the protection settings;</li>
<li>eFuse memory can be programmed (eFuse bit value changed from '0' to '1') only once; if an eFuse bit is blown, it cannot be cleared again;</li>
<li>programming fuses requires the associated I/O supply to be at a specific level: the VDDIO0 (or VDDIO if only one VDDIO is present in the package) supply of the device should be set to 2.5 V (&plusmn;5%);</li>
<li>fuses are programmed via the PSoC Programmer tool that parses the hex file and extracts the necessary information; the fuse data must be located at the dedicated section in the hex file. For more details see <a href="http://www.cypress.com/documentation/programming-specifications/psoc-6-programming-specifications">PSoC 6 Programming Specifications</a></li>
</ul>
<h1><a class="anchor" id="group_efuse_configuration"></a>
Configuration Considerations</h1>
<p>Efuse memory can have different organization depending on the selected device. Consult the device TRM to determine the efuse memory organization and registers bitmap on the selected device.</p>
<p>To read fuse data use the driver <a class="el" href="group__group__efuse__functions.html">functions</a>.</p>
<p>To blow fuses, define a data structure of <a class="el" href="structcy__stc__efuse__data__t.html">cy_stc_efuse_data_t</a> type in the firmware. The structure must be placed in the special memory section, for this use a compiler attribute. Each byte in the structure corresponds to the one fuse bit in the device. It allows the PSoC Programmer tool to distinguish bytes that are being set from bytes we don't care about or with unknown values. Fill the structure with the following values:</p><ul>
<li>0x00 - Not blown;</li>
<li>0x01 - Blown;</li>
<li>0xFF - Ignore.</li>
</ul>
<p>After the structure is defined and the values are set, build the project and download the firmware. To blow fuses, the firmware must be downloaded by the PSoC Programmer tool. Before you download firmware, ensure that the conditions from the PSoC 6 Programming Specification are met.</p>
<p>The code below shows an example of the efuse data structure definition to blow SECURE bit of the life-cycle stage register. The bits to blow are set to the EFUSE_STATE_SET value. </p><div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#define EFUSE_STATE_SET                  (0x01U)</span></div><div class="line"><span class="preprocessor">#define EFUSE_STATE_UNSET                (0x00U)</span></div><div class="line"><span class="preprocessor">#define EFUSE_STATE_IGNORE               (0xFFU)</span></div><div class="line"></div><div class="line"><span class="comment">/* Helper macros to populate the efuse data structure */</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG2(arg)            arg, arg</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG4(arg)            EXPAND_ARG2(arg),  EXPAND_ARG2(arg)</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG8(arg)            EXPAND_ARG4(arg),  EXPAND_ARG4(arg)</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG16(arg)           EXPAND_ARG8(arg),  EXPAND_ARG8(arg)</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG24(arg)           EXPAND_ARG16(arg), EXPAND_ARG8(arg)</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG32(arg)           EXPAND_ARG16(arg), EXPAND_ARG16(arg)</span></div><div class="line"><span class="preprocessor">#define EXPAND_ARG64(arg)           EXPAND_ARG32(arg), EXPAND_ARG32(arg)</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define EFUSE_STATE_IGNORE8         {{EXPAND_ARG8(EFUSE_STATE_IGNORE)}}</span></div><div class="line"></div><div class="line"><span class="comment">/* SFlash area SYS AP MPU protection */</span></div><div class="line"><span class="preprocessor">#define SFLASH_ALLOWED_ENTIRE       {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SFLASH_ALLOWED_1_2          {EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SFLASH_ALLOWED_1_4          {EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define SFLASH_ALLOWED_NONE         {EFUSE_STATE_SET,   EFUSE_STATE_SET}</span></div><div class="line"></div><div class="line"><span class="comment">/* MMIO area SYS AP MPU protection */</span></div><div class="line"><span class="preprocessor">#define MMIO_ALLOWED_ENTIRE         {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define MMIO_ALLOWED_IPC            {EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define MMIO_ALLOWED_NONE           {EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"></div><div class="line"><span class="comment">/* Flash area SYS AP MPU protection */</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_ENTIRE        {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_7_8           {EFUSE_STATE_SET,   EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_3_4           {EFUSE_STATE_UNSET, EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_1_2           {EFUSE_STATE_SET,   EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_1_4           {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_1_8           {EFUSE_STATE_SET,   EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_1_16          {EFUSE_STATE_UNSET, EFUSE_STATE_SET,   EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define FLASH_ALLOWED_NONE          {EFUSE_STATE_SET,   EFUSE_STATE_SET,   EFUSE_STATE_SET}</span></div><div class="line"></div><div class="line"><span class="comment">/* SRAM area SYS AP MPU protection */</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_ENTIRE         {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_7_8            {EFUSE_STATE_SET,   EFUSE_STATE_UNSET, EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_3_4            {EFUSE_STATE_UNSET, EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_1_2            {EFUSE_STATE_SET,   EFUSE_STATE_SET,   EFUSE_STATE_UNSET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_1_4            {EFUSE_STATE_UNSET, EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_1_8            {EFUSE_STATE_SET,   EFUSE_STATE_UNSET, EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_1_16           {EFUSE_STATE_UNSET, EFUSE_STATE_SET,   EFUSE_STATE_SET}</span></div><div class="line"><span class="preprocessor">#define SRAM_ALLOWED_NONE           {EFUSE_STATE_SET,   EFUSE_STATE_SET,   EFUSE_STATE_SET}</span></div><div class="line"></div><div class="line"><span class="comment">/* SMIF XIP area SYS AP MPU protection */</span></div><div class="line"><span class="preprocessor">#define SMIF_XIP_ALLOWED_ENTIRE     EFUSE_STATE_UNSET</span></div><div class="line"><span class="preprocessor">#define SMIF_XIP_ALLOWED_NONE       EFUSE_STATE_SET</span></div><div class="line"></div><div class="line"><span class="comment">/* The eFuse memory map organization template is defined by cy_stc_efuse_data_t</span></div><div class="line"><span class="comment">* struct which describes how data is stored in the memory. Note that the one</span></div><div class="line"><span class="comment">* byte in this structure corresponds to the one bit in the eFuse memory.</span></div><div class="line"><span class="comment">*/</span></div><div class="line">CY_SECTION(<span class="stringliteral">&quot;.cy_efuse&quot;</span>) __USED const <a class="code" href="structcy__stc__efuse__data__t.html">cy_stc_efuse_data_t</a> efuseData =</div><div class="line">{</div><div class="line">    <span class="comment">/* Ignore reserved and unchanged bits */</span></div><div class="line">    <span class="comment">/* .RESERVED0 */</span></div><div class="line">    {</div><div class="line">        EXPAND_ARG64(EFUSE_STATE_IGNORE), EXPAND_ARG64(EFUSE_STATE_IGNORE),</div><div class="line">        EXPAND_ARG64(EFUSE_STATE_IGNORE), EXPAND_ARG64(EFUSE_STATE_IGNORE),</div><div class="line">        EXPAND_ARG32(EFUSE_STATE_IGNORE), EXPAND_ARG24(EFUSE_STATE_IGNORE)</div><div class="line">    },</div><div class="line">    <span class="comment">/* .DEAD_ACCESS_RESTRICT0 */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* .CM0_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .CM4_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SYS_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SYS_AP_MPU_ENABLE */</span>         EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SFLASH_ALLOWED */</span>            SFLASH_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .MMIO_ALLOWED */</span>              MMIO_ALLOWED_ENTIRE</div><div class="line">    },</div><div class="line">    <span class="comment">/* .DEAD_ACCESS_RESTRICT1 */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* .FLASH_ALLOWED */</span>             FLASH_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .SRAM_ALLOWED */</span>              SRAM_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .SMIF_XIP_ALLOWED */</span>          SMIF_XIP_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .DIRECT_EXECUTE_DISABLE */</span>    EFUSE_STATE_UNSET</div><div class="line">    },</div><div class="line">    <span class="comment">/* .SECURE_ACCESS_RESTRICT0 */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* .CM0_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .CM4_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SYS_DISABLE */</span>               EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SYS_AP_MPU_ENABLE */</span>         EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SFLASH_ALLOWED */</span>            SFLASH_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .MMIO_ALLOWED */</span>              MMIO_ALLOWED_ENTIRE</div><div class="line">    },</div><div class="line">    <span class="comment">/* .SECURE_ACCESS_RESTRICT0 */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* .FLASH_ALLOWED */</span>             FLASH_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .SRAM_ALLOWED */</span>              SRAM_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .SMIF_XIP_ALLOWED */</span>          SMIF_XIP_ALLOWED_ENTIRE,</div><div class="line">        <span class="comment">/* .DIRECT_EXECUTE_DISABLE */</span>    EFUSE_STATE_UNSET</div><div class="line">    },</div><div class="line">    <span class="comment">/* .LIFECYCLE_STAGE */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* .NORMAL */</span>                    EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SECURE_WITH_DEBUG */</span>         EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .SECURE */</span>                    EFUSE_STATE_SET,</div><div class="line">        <span class="comment">/* .RMA */</span>                       EFUSE_STATE_UNSET,</div><div class="line">        <span class="comment">/* .RESERVED */</span>                 {EXPAND_ARG4(EFUSE_STATE_UNSET)}</div><div class="line">    },</div><div class="line">    <span class="comment">/* .RESERVED1 */</span></div><div class="line">    {</div><div class="line">        EXPAND_ARG64(EFUSE_STATE_IGNORE), EXPAND_ARG64(EFUSE_STATE_IGNORE),</div><div class="line">        EXPAND_ARG32(EFUSE_STATE_IGNORE)</div><div class="line">    },</div><div class="line">    <span class="comment">/* .CUSTOMER_USE */</span></div><div class="line">    {</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8,</div><div class="line">        EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8, EFUSE_STATE_IGNORE8</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --> <h1><a class="anchor" id="group_efuse_more_information"></a>
More Information</h1>
<p>Refer to the technical reference manual (TRM) and the device datasheet.</p>
<h1><a class="anchor" id="group_efuse_MISRA"></a>
MISRA-C Compliance</h1>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>2.3 </td><td>R </td><td>The character sequence // shall not be used within a comment. </td><td>The comments provide a useful WEB link to the documentation.  </td></tr>
<tr>
<td>11.5 </td><td>R </td><td>Dangerous pointer cast results in loss of volatile qualification. </td><td>The removal of the volatile qualification inside the function has no side effects.  </td></tr>
</table>
<h1><a class="anchor" id="group_efuse_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__efuse__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__efuse__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__efuse__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__efuse__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__efuse__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__efuse__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__efuse__enumerated__types"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__efuse__enumerated__types.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress Peripheral Driver Library (PDL)</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
