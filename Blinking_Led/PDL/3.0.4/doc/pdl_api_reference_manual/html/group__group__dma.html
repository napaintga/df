<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress Peripheral Driver Library (PDL): Direct Memory Access (DMA)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress Peripheral Driver Library (PDL)
   &#160;<span id="projectnumber">Version 3.0.4.57</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__dma.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">Direct Memory Access (DMA)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>Configures a DMA channel and its descriptor(s). </p>
<p>The DMA channel can be used in any project to transfer data without CPU intervention basing on a hardware trigger signal from another component.</p>
<p>A device may support more than one DMA hardware block. Each block has a set of registers, a base hardware address, and supports multiple channels. Many API functions for the DMA driver require a base hardware address and channel number. Ensure that you use the correct hardware address for the DMA block in use.</p>
<p>Features:</p><ul>
<li>Devices support up to two DMA hardware blocks</li>
<li>Each DMA block supports up to 16 DMA channels</li>
<li>Supports channel descriptors in SRAM</li>
<li>Four priority levels for each channel</li>
<li>Byte, half-word (2-byte), and word (4-byte) transfers</li>
<li>Configurable source and destination addresses</li>
</ul>
<h1><a class="anchor" id="group_dma_configuration"></a>
Configuration Considerations</h1>
<p>To set up a DMA driver, initialize a descriptor, intialize and enable a channel, and enable the DMA block.</p>
<p>To set up a descriptor, provide the configuration parameters for the descriptor in the <a class="el" href="structcy__stc__dma__descriptor__config__t.html">cy_stc_dma_descriptor_config_t</a> structure. Then call the <a class="el" href="group__group__dma__descriptor__functions.html#gab1610fab6f2dd5fd25c031ac0aa9d8cb">Cy_DMA_Descriptor_Init</a> function to initialize the descriptor in SRAM. You can modify the source and destination addresses dynamically by calling <a class="el" href="group__group__dma__descriptor__functions.html#ga2df838cf16522aa18ad713fd05107b4c">Cy_DMA_Descriptor_SetSrcAddress</a> and <a class="el" href="group__group__dma__descriptor__functions.html#ga2c7111653150314961db83f7941a03c2">Cy_DMA_Descriptor_SetDstAddress</a>.</p>
<p>To set up a DMA channel, provide a filled <a class="el" href="structcy__stc__dma__channel__config__t.html">cy_stc_dma_channel_config_t</a> structure. Call the <a class="el" href="group__group__dma__channel__functions.html#gab0beed3c05362206ac66fc4327d8964b">Cy_DMA_Channel_Init</a> function, specifying the channel number. Use <a class="el" href="group__group__dma__channel__functions.html#ga13e6923cafe660ba825ba6d5b1841bf7">Cy_DMA_Channel_Enable</a> to enable the configured DMA channel.</p>
<p>Call <a class="el" href="group__group__dma__channel__functions.html#ga13e6923cafe660ba825ba6d5b1841bf7">Cy_DMA_Channel_Enable</a> for each DMA channel in use.</p>
<p>When configured, another peripheral typically triggers the DMA. The trigger is connected to the DMA using the trigger multiplexer. The trigger multiplexer driver has a software trigger you can use in firmware to trigger the DMA. See the <a href="group__group__trigmux.html">Trigger Multiplexer</a> documentation.</p>
<p>The following is a simplified structure of the DMA driver API interdependencies in a typical user application: </p><div class="image">
<img src="dma.png" alt="dma.png"/>
</div>
<p><b>NOTE:</b> Even if a DMA channel is enabled, it is not operational until the DMA block is enabled using function <a class="el" href="group__group__dma__block__functions.html#gad14b53935dc8321f395e49a7dfec2c5a">Cy_DMA_Enable</a>.<br />
<b>NOTE:</b> if the DMA descriptor is configured to generate an interrupt, the interrupt must be enabled using the <a class="el" href="group__group__dma__channel__functions.html#gab3e0528d8e57ee04dbbee89ffca38545">Cy_DMA_Channel_SetInterruptMask</a> function for each DMA channel.</p>
<p>For example: </p><div class="fragment"><div class="line">        uint32_t src;</div><div class="line">        uint32_t dst;</div><div class="line">        <a class="code" href="structcy__stc__dma__descriptor__t.html">cy_stc_dma_descriptor_t</a> descriptor;</div><div class="line">        </div><div class="line">        <a class="code" href="structcy__stc__dma__descriptor__config__t.html">cy_stc_dma_descriptor_config_t</a> descriptorConfig =</div><div class="line">        {</div><div class="line">            <span class="comment">/* .retrigger       */</span> <a class="code" href="group__group__dma__enums.html#gga8ea649c82d5e7d4d4bd72403468aadeea0bf275b3b0a14445f5adb266865664ee">CY_DMA_RETRIG_IM</a>,</div><div class="line">            <span class="comment">/* .interruptType   */</span> <a class="code" href="group__group__dma__enums.html#gga46664f020f211baf0651e6c85c3c3e76a6222ddd29f8c3fdea3812562bce40c23">CY_DMA_1ELEMENT</a>,</div><div class="line">            <span class="comment">/* .triggerOutType  */</span> <a class="code" href="group__group__dma__enums.html#gga46664f020f211baf0651e6c85c3c3e76a6222ddd29f8c3fdea3812562bce40c23">CY_DMA_1ELEMENT</a>,</div><div class="line">            <span class="comment">/* .channelState    */</span> <a class="code" href="group__group__dma__enums.html#gga75740ce8bf02f62bc9e6c86307369f67a7f4266bff1786e17ba9b892ba03334db">CY_DMA_CHANNEL_ENABLED</a>,</div><div class="line">            <span class="comment">/* .triggerInType   */</span> <a class="code" href="group__group__dma__enums.html#gga46664f020f211baf0651e6c85c3c3e76a6222ddd29f8c3fdea3812562bce40c23">CY_DMA_1ELEMENT</a>,</div><div class="line">            <span class="comment">/* .dataSize        */</span> <a class="code" href="group__group__dma__enums.html#gga167a5222a0d666c6ce9e8382e56ac192a06aa9f141fdba0572953b0ffe8972ccc">CY_DMA_WORD</a>,</div><div class="line">            <span class="comment">/* .srcTransferSize */</span> <a class="code" href="group__group__dma__enums.html#gga2e6a1fad6945ca581ebd0fdbb8748314aea23c6147357af90fdb8d6a6239925c8">CY_DMA_TRANSFER_SIZE_DATA</a>,</div><div class="line">            <span class="comment">/* .dstTransferSize */</span> <a class="code" href="group__group__dma__enums.html#gga2e6a1fad6945ca581ebd0fdbb8748314aea23c6147357af90fdb8d6a6239925c8">CY_DMA_TRANSFER_SIZE_DATA</a>,</div><div class="line">            <span class="comment">/* .descriptorType  */</span> <a class="code" href="group__group__dma__enums.html#gga69516534f5a562e8a2f55bb4203851d0a216c134f1ea00163587995dfc872d880">CY_DMA_2D_TRANSFER</a>,</div><div class="line">            <span class="comment">/* .srcAddress      */</span> &amp;src,</div><div class="line">            <span class="comment">/* .dstAddress      */</span> &amp;dst,</div><div class="line">            <span class="comment">/* .srcXincrement   */</span> 0L,</div><div class="line">            <span class="comment">/* .dstXincrement   */</span> 0L,</div><div class="line">            <span class="comment">/* .xCount          */</span> 1UL,</div><div class="line">            <span class="comment">/* .srcYincrement   */</span> 0L,</div><div class="line">            <span class="comment">/* .dstYincrement   */</span> 0L,</div><div class="line">            <span class="comment">/* .yCount          */</span> 1UL,</div><div class="line">            <span class="comment">/* .nextDescriptor  */</span> descriptorPtr</div><div class="line">        };</div><div class="line">        </div><div class="line">        <a class="code" href="structcy__stc__dma__channel__config__t.html">cy_stc_dma_channel_config_t</a> channelConfig =</div><div class="line">        {</div><div class="line">            <span class="comment">/* .descriptor     */</span> descriptorPtr,</div><div class="line">            <span class="comment">/* .preemptable    */</span> <span class="keyword">false</span>,</div><div class="line">            <span class="comment">/* .priority       */</span> 3u,</div><div class="line">            <span class="comment">/* .enable         */</span> <span class="keyword">false</span>,</div><div class="line">            <span class="comment">/* .bufferable     */</span> <span class="keyword">false</span></div><div class="line">        };</div><div class="line">        </div><div class="line">        (void)<a class="code" href="group__group__dma__descriptor__functions.html#gab1610fab6f2dd5fd25c031ac0aa9d8cb">Cy_DMA_Descriptor_Init</a>(&amp;descriptor, &amp;descriptorConfig);</div><div class="line">        (void)<a class="code" href="group__group__dma__channel__functions.html#gab0beed3c05362206ac66fc4327d8964b">Cy_DMA_Channel_Init</a>(DW0, 1u, &amp;channelConfig);</div><div class="line">        <a class="code" href="group__group__dma__channel__functions.html#ga13e6923cafe660ba825ba6d5b1841bf7">Cy_DMA_Channel_Enable</a>(DW0, 1u);</div><div class="line">        <a class="code" href="group__group__dma__channel__functions.html#gab3e0528d8e57ee04dbbee89ffca38545">Cy_DMA_Channel_SetInterruptMask</a>(DW0, 1u, <a class="code" href="group__group__dma__macros.html#gadaa223697209effceea2fd4a8c957c86">CY_DMA_INTR_MASK</a>);</div><div class="line">        <a class="code" href="group__group__dma__block__functions.html#gad14b53935dc8321f395e49a7dfec2c5a">Cy_DMA_Enable</a>(DW0);</div></div><!-- fragment --> <h1><a class="anchor" id="group_dma_more_information"></a>
More Information.</h1>
<p>See: the DMA chapter of the device technical reference manual (TRM); the DMA Component datasheet; CE219940 - PSoC 6 MCU Multiple DMA Concatenation.</p>
<h1><a class="anchor" id="group_dma_MISRA"></a>
MISRA-C Compliance</h1>
<p>The DMA driver has the following specific deviations:</p>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>10.3 </td><td>R </td><td>A composite expression of the "essentially unsigned" type is being cast to a different type category. </td><td>The value got from the bitfield physically cannot exceed the enumeration that describes this bitfield. So, the code is safe by design.  </td></tr>
<tr>
<td>14.2 </td><td>R </td><td>All non-null statements will either: a) have at least one-side effect however executed; b) cause the control flow to change </td><td>A Read operation result is ignored when this read is just intended to ensure the previous Write operation is flushed out to the hardware.  </td></tr>
</table>
<h1><a class="anchor" id="group_dma_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>2.0.1 </td><td>Changed <a class="el" href="group__group__dma__macros.html#gae624e46c0f60029b7b0dc5d1cbb4596e">CY_DMA_BWC</a> macro values from Boolean to numeric </td><td>Improvements made based on usability feedback  </td></tr>
<tr>
<td>2.0 </td><td>* All the API is refactored to be consistent within itself and with the rest of the PDL content.<ul>
<li>The descriptor API is updated as follows: The <a class="el" href="group__group__dma__descriptor__functions.html#gab1610fab6f2dd5fd25c031ac0aa9d8cb">Cy_DMA_Descriptor_Init</a> function sets a full bunch of descriptor settings, and the rest of the descriptor API is a get/set interface to each of the descriptor settings.</li>
<li>There is a group of macros to support the backward compatibility with most of the driver version 1.0 API. But, it is strongly recommended to use the new v2.0 interface in new designs (do not just copy-paste from old projects). To enable the backward compatibility support, the CY_DMA_BWC definition should be changed to "1". </li>
</ul>
</td><td></td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__dma__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__dma__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__dma__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__dma__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__dma__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__dma__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__dma__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__dma__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress Peripheral Driver Library (PDL)</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
